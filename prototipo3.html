<!doctype html>

<html>
<head>
   <meta charset="UTF-8" />
   <title>Protótipo 3</title>
   <style>
      body{
         background-color: white;
         color: white;
      }
   
      canvas {
         background-color: darkblue;
      }
      
   </style>

</head>
<body>
   <h1>CESJF-GG: Protótipo 3</h1>
   <canvas id="tela" width="640" height="480">Seu navegador não suporta o canvas! <a href="http://chrome.google.com">Atualize o seu navegador</a>!</canvas>

   <script>
      var tela=document.getElementById("tela");
      var tempo_atual= new Date(); 
      var tempo_anterior = new Date(); 
      var dt;
      var ctx = tela.getContext("2d");
      var naveImg = new Image();
      var desenhaLimites = false;
      naveImg.src = "ships_human_0.png";
      var asteroidImg = new Image();
      asteroidImg.src = "asteroid_strip64.png";
      var buracoNegroImg = new Image();
      buracoNegroImg.src = "blackhole.png";


</script>

<script src = "jogador.js"></script> 
<script src="asteroide.js"></script>
<script src="buraco_negro.js"></script>
<script>
      var asteroide = new Asteroide();
      var buracoNegro = new BuracoNegro();
      var d;
      var colisao = 0;
      function desenho(){
         tempo_atual = new Date();
         dt = (tempo_atual - tempo_anterior) / 1000; 
         ctx.fillStyle = "black";
         ctx.fillRect(0, 0, 640, 480);     
         ctx.fillStyle = "gray";
         
         ctx.strokeStyle = "white";

         asteroide.mover();
         jogador.mover();
         if(buracoNegro.colisao(jogador)){
            jogador.x = 600;
            jogador.y = 300;
            jogador.vx = 00;
            jogador.vy = 00;
            jogador.angulo = -90;
            jogador.aceleracao = 0;

         }; 
         if(buracoNegro.colisao(asteroide)){
            asteroide.x = 300;
            asteroide.y = -50;
            asteroide.vx = 10*(Math.random()*2-1);
            asteroide.vy = 10*(Math.random()*2);
         
         };
         asteroide.colidido = asteroide.colisao(jogador);

         buracoNegro.desenhar(ctx);
         jogador.desenhar(ctx);
         asteroide.desenhar(ctx);
         tempo_anterior = tempo_atual;

      }
      window.setInterval(desenho, 1000/60);
   
      document.addEventListener("keydown", tecla_pressionada);
      document.addEventListener("keyup", tecla_solta)
      function tecla_pressionada(evento){
         if (evento.keyCode == 39){
            jogador.vang = 120;
         } else if(evento.keyCode == 37){
            jogador.vang = -120;
         }
         if(evento.keyCode == 38){
            jogador.aceleracao =  1;
            jogador.quadro = 1;
         }  else if(evento.keyCode == 40){
            jogador.aceleracao = 0;
         }             
      }
      function tecla_solta(evento){
         if (evento.keyCode == 39){
            jogador.vang = 0;
         } else if(evento.keyCode == 37){
            jogador.vang = 0;
         }
         if(evento.keyCode == 38){
            jogador.aceleracao = 0;
            jogador.quadro = 0;
         } else if(evento.keyCode == 40){
            jogador.aceleracao = 0;
            jogador.quadro = 0;
         }
      }
         
         
   </script>
</body>

</html>






