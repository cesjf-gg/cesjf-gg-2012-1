<!doctype html>

<html>
<head>
   <meta charset="UTF-8" />
   <title>Protótipo 3</title>
   <style>
      body{
         background-color: black;
         color: white;
      }
   
      canvas {
         background-color: darkblue;
      }
      
   </style>
</head>
<body>
   <h1>CESJF-GG: Protótipo 3</h1>
   <canvas id="tela" width="640" height="480">Seu navegador não suporta o canvas! <a href="http://chrome.google.com">Atualize o seu navegador</a>!</canvas>

   <script>
      var tela=document.getElementById("tela");
      var tempo_atual= new Date(); 
      var tempo_anterior = new Date(); 
      var dt;
      var ctx = tela.getContext("2d");
      var x = 20;
      var vx = 0;
      var y = 40;
      var vy = 0;
      var ax = 0;
      var ay = 0;
      
      function desenho(){
         tempo_atual = new Date();
         dt = (tempo_atual - tempo_anterior) / 1000; 
         ctx.fillStyle = "darkblue";
         ctx.fillRect(0, 0, 640, 480);     
         ctx.fillStyle = "gray";
         ctx.fillRect(x, y, 20, 20);      
         ctx.strokeStyle = "white";
         ctx.strokeRect(x, y, 20, 20);
         vx +=ax * dt;
         x+= vx * dt;
         vy += ay * dt; 
         y+= vy * dt;
         if((x > 300 && ax > 0) || (x < 50 && ax < 0)){
            ax = -ax;
            console.log(ax);
         }
         if((y > 440) || (y < 20)){
            vy = -vy;
         }
         tempo_anterior = tempo_atual;

      }
      window.setInterval(desenho, 1000/60);
   
      document.addEventListener("keydown", tecla_pressionada);
      document.addEventListener("keyup", tecla_solta)
      function tecla_pressionada(evento){
         console.log(evento.keyCode);
         if (evento.keyCode == 39){
            ax = 30;
         } else if(evento.keyCode == 37){
            ax = -30;
         }
         if(evento.keyCode == 38){
            ay = - 30;
         }  else if(evento.keyCode == 40){
            ay = 30;
         }             
      }
      function tecla_solta(evento){
         if (evento.keyCode == 39){
            ax = 0;
         } else if(evento.keyCode == 37){
            ax = 0;
         }
         if(evento.keyCode == 38){
            ay = 0;
         } else if(evento.keyCode == 40){
            ay = 0;
         }
      }
         
   </script>
</body>

</html>






