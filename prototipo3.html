<!doctype html>

<html>
<head>
   <meta charset="UTF-8" />
   <title>Protótipo 3</title>
   <style>
      body{
         background-color: black;
         color: white;
      }
   
      canvas {
         background-color: darkblue;
      }
      
   </style>
</head>
<body>
   <h1>CESJF-GG: Protótipo 3</h1>
   <canvas id="tela" width="640" height="480">Seu navegador não suporta o canvas! <a href="http://chrome.google.com">Atualize o seu navegador</a>!</canvas>

   <script>
      var tela=document.getElementById("tela");
      var tempo_atual= new Date(); 
      var tempo_anterior = new Date(); 
      var dt;
      var ctx = tela.getContext("2d");
      var x = 100;
      var y = 100;
      var angulo = 0;
      var vang = 0;      
      var aceleracao = 0;
      var vx = 0;
      var vy = 0;


      

      function desenho(){
         tempo_atual = new Date();
         dt = (tempo_atual - tempo_anterior) / 1000; 
         ctx.fillStyle = "darkblue";
         ctx.fillRect(0, 0, 640, 480);     
         ctx.fillStyle = "gray";
         //ctx.fillRect(x, y, 20, 20);      
         ctx.strokeStyle = "white";
         //ctx.strokeRect(x, y, 20, 20);
         
         //desenha triangulo
         ctx.save();
         ctx.translate(x, y);
         ctx.rotate(angulo * 2 * Math.PI / 360);         
         ctx.beginPath( );
         ctx.moveTo(0, -10);
         ctx.lineTo(8, 10);
         ctx.lineTo(-8, 10);
         ctx.lineTo(0, -10);


         ctx.closePath( );
         ctx.stroke();
         ctx.restore();



         angulo += vang * dt;
         x += vx;
         y -= vy;
         vx += aceleracao*Math.sin(angulo * 2 * Math.PI / 360)*dt;
         vy += aceleracao*Math.cos(angulo * 2 * Math.PI / 360)*dt;

         if(y<-20) {
            y = 500;
         }
         if(y>500) {
            y = -20;
         }
         if(x<-20) {
            x = 660;
         }
         if(x>660) {
            x = -20;
         }

         tempo_anterior = tempo_atual;

      }
      window.setInterval(desenho, 1000/60);
   
      document.addEventListener("keydown", tecla_pressionada);
      document.addEventListener("keyup", tecla_solta)
      function tecla_pressionada(evento){
         console.log(evento.keyCode);
         if (evento.keyCode == 39){
            vang = 120;
         } else if(evento.keyCode == 37){
            vang = -120;
         }
         if(evento.keyCode == 38){
            aceleracao =  1;
         }  else if(evento.keyCode == 40){
            aceleracao = 0;
         }             
      }
      function tecla_solta(evento){
         if (evento.keyCode == 39){
            vang = 0;
         } else if(evento.keyCode == 37){
            vang = 0;
         }
         if(evento.keyCode == 38){
            aceleracao = 0;
         } else if(evento.keyCode == 40){
            aceleracao = 0;
         }
      }
         
         
   </script>
</body>

</html>






